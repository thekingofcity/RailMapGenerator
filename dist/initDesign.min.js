(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{19:function(e,t,i){"use strict";i.r(t),i.d(t,"common",(function(){return m})),i.d(t,"mtr",(function(){return _})),i.d(t,"gzmtr",(function(){return r}));var n=i(0),l=i(7),a=i(3),o=i(13),d=i(12),s=i(14),c=i(4);function m(){const e=l.MDCList.attachTo($("#design_list")[0]),[t,i]=["#design_theme_diag","#line_name_diag"].map(e=>a.MDCDialog.attachTo($(e)[0])),[s,m]=["#theme_city","#theme_line"].map(e=>new o.MDCSelect($(e)[0])),_=new d.MDCTextField($("#theme_colour")[0]),r=new d.MDCTextField($("#theme_colour_hex")[0]),h=new o.MDCSelect($("#theme_fg")[0]),[u,p]=["#name_zh","#name_en"].map(e=>d.MDCTextField.attachTo($("#line_name_diag").find(e)[0])),g=d.MDCTextField.attachTo($("#platform_num")[0]);$("#panel_design .mdc-list li").map((e,t)=>new c.MDCRipple(t));const w=e=>$("#design_list").find(`li#direc p#${e}`).text();Promise.resolve(Object(n.d)()).then(e=>{$("#design_list").find("li#name .mdc-list-item__secondary-text").text(e.line_name.join()),u.value=e.line_name[0],p.value=e.line_name[1],$("#design_list").find("li#direc .mdc-list-item__secondary-text").text(w(e.direction)),g.value=e.platform_num}),$.getJSON("data/city_list.json",e=>{let t=window.urlParams.get("lang");e.forEach(e=>{$("#theme_city__selection").append($("<li>",{class:"mdc-list-item","data-value":e.id}).html(Object(n.a)(e.country)+Object(n.f)(e.name,t)))}),$("#theme_city__selection li").map((e,t)=>new c.MDCRipple(t));var[i]=Object(n.d)().theme,l=$(`#theme_city__selection > [data-value="${i}"]`).index();s.selectedIndex=l}),e.listen("MDCList:action",e=>{switch(e.detail.index){case 0:t.open();break;case 1:i.open();break;case 2:"r"==Object(n.d)().direction?(console.log("right to left"),window.myLine.direction="l",$("#design_list").find("li#direc .mdc-list-item__secondary-text").text(w("l"))):(console.log("left to right"),window.myLine.direction="r",$("#design_list").find("li#direc .mdc-list-item__secondary-text").text(w("r")));break;case 4:window.myLine.reverseStns()}}),t.listen("MDCDialog:opened",()=>{[s,m].map(e=>e.layout()),_.layout(),r.layout(),h.layout()}),s.listen("MDCSelect:change",e=>{let t=e.detail.value;"other"===t?($("[theme-line]").hide(),$("[theme-diy]").show()):($("[theme-line]").show(),$("[theme-diy]").hide()),$("#theme_line__selection").empty();let i=Object(n.d)();$.getJSON(`data/${t}.json`,e=>{var l=window.urlParams.get("lang");e.forEach(e=>{$("#theme_line__selection").append($("<li>",{class:"mdc-list-item","data-value":e.id}).append($("<span>").css({background:"other"===t?i.theme[2]:e.colour,color:"other"===t?i.theme[3]:e.fg||"#fff"}).text(" "+Object(n.f)(e.name,l)+" ")))}),$("#theme_line__selection li").map((e,t)=>new c.MDCRipple(t));var a=$(`#theme_line__selection > [data-value="${i.theme[1]}"]`).index();m.selectedIndex=-1==a?0:a})}),m.listen("MDCSelect:change",e=>{let t=e.detail.index,i=["background-color","color"].map(e=>$("#theme_line__selection span").eq(t).css(e)).map(n.j);window.myLine.theme=[s.value,m.value,i[0],i[1]],_.value=i[0],r.value=i[0].slice(1).toUpperCase(),h.value=i[1],$("#design_list").find("li#theme .mdc-list-item__secondary-text").html($("#theme_city__selection li").eq(s.selectedIndex).html()+" "+$("#theme_line__selection li").eq(t).html().trim())}),$(_.root_).find("input").on("input",e=>{let t=e.target.value;r.value=t.slice(1).toUpperCase(),window.myLine.theme=["other","other",t,h.value],$("#theme_line__selection li span").css("background",t),$("#design_list li#theme .mdc-list-item__secondary-text span").css("background",t)}),$(r.root_).find("input").on("input",e=>{let t=e.target.value;null!==t.match(/[0-9a-fA-F]{6}/g)&&t===t.match(/[0-9a-fA-F]{6}/g)[0]&&(_.value="#"+t,window.myLine.theme=["other","other","#"+t,h.value],$("#theme_line__selection li span").css("background","#"+t),$("#design_list li#theme .mdc-list-item__secondary-text span").css("background","#"+t))}),h.listen("MDCSelect:change",e=>{"other"===s.value&&(window.myLine.theme=[s.value,m.value,_.value,e.detail.value],$("#theme_line__selection li span").css("color",e.detail.value),$("#design_list li#theme .mdc-list-item__secondary-text span").css("color",e.detail.value))}),i.listen("MDCDialog:opened",e=>{[u,p].map(e=>e.layout())}),$("#line_name_diag").find(".mdc-text-field").on("input",()=>{let e=[u,p].map(e=>e.value);window.myLine.lineNames=e,$("#design_list").find("li#name .mdc-list-item__secondary-text").text(e.join())}),$(g.root_).find("input").on("input",e=>window.myLine.platformNum=e.target.value)}function _(){const e=l.MDCList.attachTo($("#design_list_mtr")[0]),t=a.MDCDialog.attachTo($("#design_char_diag")[0]),i=new s.MDCSwitch($("#legacy")[0]);Promise.resolve(Object(n.d)()).then(e=>{$("#design_char_diag")[0].dispatchEvent(new CustomEvent("MDCDialog:closed",{detail:{action:e.char_form}})),i.checked=e.dest_legacy}),e.listen("MDCList:action",e=>{switch(e.detail.index){case 0:window.myLine.txtFlip=!Object(n.d)().txt_flip;break;case 1:t.open()}}),t.listen("MDCDialog:closed",e=>{let t=e.detail.action;"close"!=t&&(window.myLine.charForm=t,$("#design_list_mtr").find("li#char .mdc-list-item__secondary-text").text((e=>$("#design_char_diag").find("li").filter((t,i)=>i.dataset.mdcDialogAction===e).find("span").text())(t)))}),$(i.root_).find("input").on("change",e=>window.myLine.destLegacy=e.target.checked)}function r(){const e=l.MDCList.attachTo($("#design_list_gzmtr")[0]),t=a.MDCDialog.attachTo($("#panel_type_diag")[0]),[i,o]=["#psd_num","#line_num"].map(e=>d.MDCTextField.attachTo($(e)[0]));Promise.resolve(Object(n.d)()).then(e=>{i.value=e.psd_num,o.value=e.line_num}),e.listen("MDCList:action",e=>{switch(e.detail.index){case 1:t.open()}}),$(o.root_).find("input").on("input",e=>window.myLine.lineNum=e.target.value),$(i.root_).find("input").on("input",e=>window.myLine.psdNum=e.target.value),t.listen("MDCDialog:closed",e=>{"close"!==e.detail.action&&(window.myLine.infoPanelType=e.detail.action)})}}}]);